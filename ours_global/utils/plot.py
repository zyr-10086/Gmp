import Stitch_lib as slb
import numpy as np
import pandas as pd
import math

import matplotlib.pyplot as plt
import matplotlib.patches as patches
import pickle
from scipy.interpolate import splprep, splev

if __name__ == '__main__':

    pkl_name = 'l1'

    global_map = slb.load_data('pkls/center_v2/merge_center_l1.pkl')
    # global_map = slb.load_data('results/pickles/center/merge_'+ pkl_name + '.pkl')

    x = [[-2279.267190777856, -2226.732312743579],
         [-2289.1948418856778, -2227.818107782266],
         [-2276.730960326724, -2228.549954904361],
         [-2273.612641894883, -2230.6970198560184],
         [-2278.152935931118, -2226.9286666458834],
         [-2278.503080469362, -2228.017604020914],
         [-2278.370734007204, -2227.0679722911937],
         [-2278.60379043922, -2228.0464981927635],
         [-2275.597047700434, -2232.87592293603],
         [-2275.5987290265966, -2230.7211669590492],
         [-2277.6710042038126, -2227.26966198856],
         [-2277.6076610467067, -2228.9739792339296],
         [-2271.9602029508433, -2235.839374799022],
         [-2241.0879754448133, -2178.442427333226],
         [-2239.4964875301725, -2192.0026011678256],
         [-2228.495244280423, -2178.284996675112]]
    y = [[-762.050837038146, -512.3228417937371],
         [-762.2027449767028, -512.6842424596452],
         [-563.1302765976382, -528.8487883822589],
         [-545.9059551536509, -529.2596514290487],
         [-579.8825298218386, -562.8074974886914],
         [-597.3078047641304, -579.6338499325618],
         [-656.335149821637, -600.2464130146694],
         [-698.2847119191482, -672.7414543972795],
         [-753.393813184462, -706.4474252498134],
         [-550.3667948462707, -529.0375057060023],
         [-649.0118006618776, -551.2333025146362],
         [-723.8195925477045, -649.4154296566635],
         [-753.9045797813873, -724.8609376854617],
         [-815.9402829810654, -596.3372464915825],
         [-770.8908060581186, -709.9387400806884],
         [-747.4708692772189, -600.2650290690565]]
    
    # center_l1 -2337.267190777856 -2226.732312743579 -762.050837038146 -512.3228417937371
    # center_l2 -2289.1948418856778 -2227.818107782266 -762.2027449767028 -512.6842424596452
    # center_s1 -2276.730960326724 -2228.549954904361 -563.1302765976382 -528.8487883822589
    # center_s2 -2273.612641894883 -2230.6970198560184 -545.9059551536509 -529.2596514290487
    # center_s3 -2278.152935931118 -2226.9286666458834 -579.8825298218386 -562.8074974886914
    # center_s4 -2278.503080469362 -2228.017604020914 -597.3078047641304 -579.6338499325618
    # center_s5 -2278.370734007204 -2227.0679722911937 -656.335149821637 -600.2464130146694
    # center_s6 -2278.60379043922 -2228.0464981927635 -698.2847119191482 -672.7414543972795
    # center_s7 -2275.597047700434 -2232.87592293603 -753.393813184462 -706.4474252498134
    # center_s8 -2275.5987290265966 -2230.7211669590492 -550.3667948462707 -529.0375057060023
    # center_s9 -2277.6710042038126 -2227.26966198856 -649.0118006618776 -551.2333025146362
    # center_s10 -2277.6076610467067 -2228.9739792339296 -723.8195925477045 -649.4154296566635
    # center_s11 -2271.9602029508433 -2235.839374799022 -753.9045797813873 -724.8609376854617
    # right_l1 -2241.0879754448133 -2178.442427333226 -815.9402829810654 -596.3372464915825
    # right_s1 -2239.4964875301725 -2192.0026011678256 -770.8908060581186 -709.9387400806884
    # right_s2 -2228.495244280423 -2178.284996675112 -747.4708692772189 -600.2650290690565

    if(pkl_name[0] == 'l'):
        index = int(pkl_name[1])
        range_x = x[index - 1]
        range_y = y[index - 1]
    else:
        index = int(pkl_name[1])
        range_x = x[index + 1]
        range_y = y[index + 1]

#     range_x = x[0]
#     range_y = y[0]

    range_x[0] -= 20
    range_x[1] += 20
    range_y[0] -= 20
    range_y[1] += 20

    slb.plot_map(global_map, 'merged_'+ pkl_name + '_arrow_global_view', range_x, range_y, save = True, fit = True, show=False, is_global=True)